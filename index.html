<!DOCTYPE html>
<html lang="ja">
<head>
  <meta charset="UTF-8"><meta name="viewport" content="width=device-width, initial-scale=1.0">
  <title>ãŠè©±ã®æ£® | mofinaproject</title>
  <link rel="stylesheet" href="style.css"><link rel="icon" href="/assets/mofina.ico">
</head>
<body>
  <main class="screen"><section class="panel">
    <div id="chatLog" class="chatLog"></div>
    <form id="chatForm" class="chatForm" onsubmit="return false;">
      <input id="chatInput" class="chatInput" type="text" placeholder="ã‚‚ãµãƒãªã«è©±ã—ã‹ã‘ã¦ã­â€¦" autocomplete="off">
      <button id="chatBtn" class="chatBtn" type="submit">é€ä¿¡</button>
    </form>
  </section></main>
  <script>
    const log = document.getElementById("chatLog");
    const input = document.getElementById("chatInput");
    const form = document.getElementById("chatForm");
    function add(role, text) {
      const row = document.createElement("div");
      row.className = "msg " + (role === "user" ? "user" : "bot");
      row.innerHTML = `<div class="bubble">${text}</div>`;
      log.appendChild(row);
      log.scrollTop = log.scrollHeight;
      return row;
    }
    form.addEventListener("submit", async () => {
      const msg = input.value.trim(); if(!msg) return; input.value = "";
      add("user", msg);
      const th = add("bot", "â€¦è€ƒãˆä¸­ğŸƒ");
      try {
        const res = await fetch("/api/chat", { method: "POST", body: JSON.stringify({ message: msg }) });
        const data = await res.json();
        th.querySelector(".bubble").textContent = data.reply;
        log.scrollTop = log.scrollHeight;
      } catch(e) { th.querySelector(".bubble").textContent = "ã‚¨ãƒ©ãƒ¼ã ãƒ‹ãƒ£ğŸŒ¿"; }
    });
  </script>
</body>
</html>